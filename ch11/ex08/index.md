# 問題

正規表現の処理には予想以上に時間がかかる可能性がある。

例えば、利用者が正規表現を入力して何か検索を行うことが出来るサービスを開発したとする。
リリース後、とある利用者によって `^(a|aa)+$` といった文字列が入力されたと考えよう。
この正規表現が `"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa!"` といった文字列にマッチするか調べようとするとどうなるだろうか。

# 回答

catastrophic backtracking（壊滅的バックトラッキング）という現象になる。
多くの実用正規表現エンジン（JavaScript/PCRE/Perl/Java など）は「バックトラッキング型」。
この方式は、量指定子（`* + {m,n}`）や選択（`|`）で生じる複数の取り方（分岐）を試しながら前進し、失敗したら直前の分岐に戻って別の取り方を再試行する（= バックトラック）。
壊滅的バックトラッキングは、分岐が 指数的に増える組み合わせ探索になってしまい、入力が少し長くなっただけで実行時間が爆発する現象。
