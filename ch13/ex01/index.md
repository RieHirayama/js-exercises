# 問題

以下のコードを実行すると何が出力されるか予想し実際に確認しなさい。
また「[タスク](https://developer.mozilla.org/ja/docs/Web/API/HTML_DOM_API/Microtask_guide)」について調査し、この用語を用いて理由を説明しなさい。

```js
setTimeout(() => console.log("Hello, world!"), 1000);

function longRunningFunction() {
  while (true) {
    // NOTE: while (true) {} は極端な例であり、現実で見ることは少ないかもしれません。
    // しかし、時間のかかる同期処理を実行して同様の問題が発生することは実際にあります。
  }
}

longRunningFunction();
```

# 回答

予想：無限ループに先に入ってしまうので、「Hello, world!」は表示されない。

結果：何も出力されない。（「Hello, world!」が表示されない）

理由：

- setTimeout(..., 1000)で、1000ms後に実行したい処理をタスクとしてタイマー経由でタスクキュー（マクロタスク）に入れる。
- しかし、タスクは「呼び出しスタックが空になったとき」かつ「イベントループが次のタスクを取り出せるとき」にしか実行されない。
- longRunningFunction()はwhile (true){}が同期的に永遠に回り続けるため、呼び出しスタックが空にならない。
  その結果、1000ms 経過してもイベントループがタスクキューからsetTimeoutのコールバックを取り出せず、「Hello, world!」は一生実行されない。

## 参考）タスク

タスクとは、プログラムの初期実行、イベントコールバックの実行、インターバルやタイムアウトの発生など、標準的なメカニズムによって実行がスケジュールされる JavaScript コードのことです。これらはすべてタスクキューにスケジューリングされます。

タスクは、以下の場合にタスクキューに追加されます。

新しい JavaScript プログラムやサブプログラムが（コンソールから、あるいは <script> 要素内のコードを実行して）直接実行されたとき。
イベントが発生し、イベントのコールバック関数がタスクキューに追加された場合。
setTimeout() または setInterval() で作成したタイムアウトまたはインターバルに達すると、対応するコールバックがタスクキューに追加されます。
コードを駆動するイベントループは、これらのタスクがキューに入れられた順番に次々と処理します。イベントループの一回の処理中に、タスクキューで最も古い実行可能なタスクが実行されます。その後、マイクロタスクキューが空になるまでマイクロタスクが実行され、ブラウザーはレンダリングの更新を選べます。その後、ブラウザーはイベントループの次の反復処理に移されます。
