## 問題 15.11-15.16 🖋️

オリジン間リソース共有（CORS）について、以下の問いに答えなさい。

1. クロスオリジンリクエストに制約が無かった場合、どのような問題が発生するか述べなさい
2. クロスオリジンリクエストで メソッド(`POST`/`GET`)やリクエストの内容によって Preflight リクエストの有無が異なるのは何故か、その理由を述べなさい

## 回答

- クロスオリジンリクエストに制約が無かった場合、どのような問題が発生するか述べなさい
  - クロスオリジンリクエストに制約が無かった場合、悪意のある Web サイトが、ユーザーの意図しない形で他のサイトの情報にアクセスできてしまう問題が発生する。  
例えば、ユーザーがログイン中の状態で銀行や業務システムのサイトを開いたまま、別の悪意あるサイトを閲覧すると、そのサイトからログイン済みサービスの API にリクエストを送信できてしまう。これにより、個人情報の取得や、データの不正操作が行われる可能性がある。  
このような攻撃を防ぐため、ブラウザは同一オリジンポリシーを採用し、異なるオリジンへのリクエストには制約を設けている。

- クロスオリジンリクエストで メソッド(`POST`/`GET`)やリクエストの内容によって Preflight リクエストの有無が異なるのは何故か、その理由を述べなさい

  - リクエストがサーバーに対して与える影響の大きさが異なるため。
GET や一部の POST リクエストのように、比較的安全で副作用が小さいと判断されるリクエストについては、通信コストを抑えるため Preflight を省略している。  
一方で、PUT や DELETE、独自ヘッダーを含むリクエストなど、サーバーの状態を変更する可能性が高いリクエストについては、事前に Preflight リクエスト（OPTIONS）を送信し、サーバー側がその通信を許可しているか確認する。  
これにより、危険性の高い操作が無断で実行されることを防ぎつつ、不要な通信を増やさないように設計されている。  